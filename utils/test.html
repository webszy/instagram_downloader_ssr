<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <script src="https://cdn.jsdelivr.net/npm/axios@0.19.0/dist/axios.min.js"></script>
</head>
<body>
  
</body>
<script>
window.onload = async function(){
  let queryHash='cda12de4f7fd3719c0569ce03589f4c4',
  variables={"reel_ids":["25388753"],
    "tag_names":[],
    "location_ids":[],
    "highlight_reel_ids":[],
    "precomposed_overlay":false,
    "show_story_viewer_list":true,
    "story_viewer_fetch_count":50,
    "story_viewer_cursor":"",
    "stories_video_dash_manifest":false
  }
  const request=axios.create({
    
  })

  // let res =await request({
  //   url:'https://www.instagram.com/graphql/query/',
  //   method:'get',
  //   params:{
  //     query_hash:queryHash,
  //     variables:variables
  //   },
  // })
  let reg=/<script.*src="(.*Consumer.js*)".*<\/script>/
  let index = await request('https://www.instagram.com/stories/mvlu_/')
  let arr=index.data.split('<script type="text/javascript"'),jsURL=''
  arr.forEach(element => {
    if(element.indexOf(' src=')===0&&element.indexOf('Consumer.js')>0){
      jsURL=element.substring(5).split('crossorigin')[0].split('"')[1]
    }
  });
  jsURL='https://www.instagram.com'+jsURL
  console.log("TCL: jsURL", jsURL)
  let jsfile=await request(jsURL)
  console.log("TCL: jsfile", jsfile.data.match('h="'))
  
}
</script>
</html>
